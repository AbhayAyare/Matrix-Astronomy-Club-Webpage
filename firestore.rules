
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // Default deny all reads/writes
    match /{document=**} {
      allow read, write: if false;
    }

    // Allow public read access to gallery metadata
    match /gallery/{imageId} {
      allow read: if true;
      // Allow write/delete only for authenticated users (admins)
      // You might want to refine this rule further based on admin roles if needed
      allow create, update, delete: if request.auth != null;
    }

    // Allow read access to site content configuration
     match /config/siteContent {
        allow read: if true;
        // Allow write only for authenticated users (admins)
        allow write: if request.auth != null;
     }

     // Allow public read access to events
     match /events/{eventId} {
       allow read: if true;
       // Allow write/delete only for authenticated users (admins)
       allow create, update, delete: if request.auth != null;
     }

     // Allow creating member documents (public write for join form)
      match /members/{memberId} {
        allow create: if true; // Anyone can submit the join form
        allow read, update, delete: if request.auth != null; // Only admins can read/manage members
      }

      // Allow creating newsletter subscriber documents (public write)
      match /newsletterSubscribers/{subscriberId} {
        allow create: if true; // Anyone can subscribe
        allow read, delete: if request.auth != null; // Only admins can read/delete
      }
  }
}
